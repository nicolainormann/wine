{"version":3,"sources":["app.config.ts","app.ts","components/wine/wine.module.ts","components/wine/controller/detail.ts","components/wine/controller/list.ts","components/wine/controller/search.ts","components/wine/services/service.ts"],"names":["WineApp","WineConfig","$stateProvider","$urlRouterProvider","$locationProvider","otherwise","html5Mode","state","url","templateUrl","controller","controllerAs","resolve","details","service","$stateParams","getCurrentProduct","id","angular","module","config","this","product","console","log","list","$q","$http","_this","searchQuery","apiKey","products","total","timeout","showSearchResult","offset","updateProductSearch","clearTimeout","setTimeout","get","then","data","listData","Object","keys","List","forEach","item","push","Total","addProductToList","isProductOnList","ids","Id","indexOf","loadMoreProducts","responseType","defer","response","reason","reject","promise","currentId","filter","pop"],"mappings":"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","file":"main.min.js","sourcesContent":["/// <reference path=\"../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nnamespace WineApp {\r\n    export function WineConfig($stateProvider, $urlRouterProvider, $locationProvider) {\r\n        $urlRouterProvider.otherwise(\"/\");\r\n\r\n        $locationProvider.html5Mode(true);\r\n\r\n        $stateProvider\r\n            .state('search', {\r\n                url: '/',\r\n                templateUrl: '/assets/ts/components/wine/view/search.html'\r\n            })\r\n            .state('list', {\r\n                url: '/list',\r\n                templateUrl: '/assets/ts/components/wine/view/list.html'\r\n            })\r\n            .state('detail', {\r\n                url: '/detail/:id',\r\n                templateUrl: '/assets/ts/components/wine/view/detail.html',\r\n                controller: 'DetailCtrl',\r\n                controllerAs: 'detail',\r\n                resolve: {\r\n                    details: function (service, $stateParams) {\r\n                        return service.getCurrentProduct($stateParams.id);\r\n                    }\r\n                }\r\n            })\r\n            .state('edit', {\r\n                url: '/detail/:id/edit',\r\n                templateUrl: '/assets/ts/components/wine/view/edit.html'\r\n            });\r\n    }\r\n}","/// <reference path=\"../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nnamespace WineApp {\r\n    angular.module('app', [\r\n        \"ui.router\",\r\n        \"wine\"\r\n    ])        \r\n   .config(WineApp.WineConfig)\r\n}","angular.module(\"wine\", []);","/// <reference path=\"../../../../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nangular.module(\"wine\")\r\n    .controller(\"DetailCtrl\", function (details) {\r\n        this.product = details;\r\n        console.log(this.product);\r\n    }); ","/// <reference path=\"../../../../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nangular.module(\"wine\")\r\n    .controller(\"ListCtrl\", function (service) {\r\n        this.list = service.list;\r\n    });","/// <reference path=\"../../../../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nangular.module(\"wine\")\r\n    .controller(\"SearchCtrl\", function (service, $q, $http) {\r\n        this.searchQuery = null;\r\n        this.apiKey = \"9abd6256d560e9392d129425afe7eee9\";\r\n        this.service = \"http://services.wine.com/api/beta2/service.svc/json/catalog\";\r\n        this.products;\r\n        this.list = service.list;\r\n        this.total;\r\n        this.timeout;\r\n        this.showSearchResult = false;\r\n        this.offset = 10;\r\n\r\n        this.updateProductSearch = () => {\r\n            clearTimeout(this.timeout);\r\n\r\n            this.timeout = setTimeout(() => {\r\n                service.get(this.service + \"?search=\" + this.searchQuery + \"&apikey=\" + this.apiKey, $http, $q, 'json')\r\n                    .then((data) => {\r\n                        this.products = [];\r\n                        var listData = data[Object.keys(data)[1]].List;\r\n                        listData.forEach((item) => {\r\n                            this.products.push(item);\r\n                        });\r\n                        \r\n                        this.total = data[Object.keys(data)[1]].Total;\r\n\r\n                        this.showSearchResult = true;\r\n                    });\r\n            }, 250);\r\n        }\r\n\r\n        this.addProductToList = (product) => {\r\n            service.addProductToList(product);\r\n        }\r\n\r\n        this.isProductOnList = (product) => {\r\n            var ids = [];\r\n            this.list.forEach((item) => {\r\n                ids.push(item.Id);\r\n            });\r\n\r\n            return ids.indexOf(product.Id) !== -1;\r\n        }\r\n\r\n        this.loadMoreProducts = () => {\r\n            service.get(this.service + \"?search=\" + this.searchQuery + \"&offset=\" + this.offset + \"&apikey=\" + this.apiKey, $http, $q, 'json')\r\n                .then((data) => {\r\n                    var listData = data[Object.keys(data)[1]].List;\r\n                    listData.forEach((item) => {\r\n                        this.products.push(item);\r\n                    });\r\n\r\n                    this.offset += 10;\r\n                });\r\n        }\r\n    });","/// <reference path=\"../../../../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nangular.module(\"wine\").service(\"service\", function () {\r\n    this.list = [];\r\n\r\n    this.get = (url: string, $http: ng.IHttpService, $q, responseType?: string): ng.IPromise<any> => {\r\n        var defer = $q.defer();\r\n\r\n        $http.get(url, { responseType: responseType ? responseType : 'json' })\r\n            .then(function successCallback(response) {\r\n                defer.resolve(response.data);\r\n            }, function errorCallback(reason) {\r\n                defer.reject(reason);\r\n            });\r\n        return defer.promise;\r\n    }\r\n\r\n    this.addProductToList = (product: Object) => {\r\n        this.list.push(product);\r\n    }\r\n\r\n    this.getCurrentProduct = (currentId) => {\r\n        var product = this.list.filter((item) => {\r\n            return item.Id == currentId;\r\n        });\r\n\r\n        return product.pop();\r\n    }\r\n});"],"sourceRoot":"/source/"}