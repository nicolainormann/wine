{"version":3,"sources":["app.config.ts","app.ts","components/wine/wine.module.ts","components/wine/controller/detail.ts","components/wine/controller/list.ts","components/wine/controller/search.ts","components/wine/components/product.ts","components/wine/services/service.ts"],"names":["WineApp","WineConfig","$stateProvider","$urlRouterProvider","$locationProvider","otherwise","html5Mode","state","url","templateUrl","controller","controllerAs","resolve","details","service","$stateParams","getCurrentProduct","id","angular","module","config","this","product","list","$q","$http","_this","searchQuery","apiKey","products","total","filter","showSearchResult","offset","filterOptions","Appellation","Name","Vineyard","sortOptions","options","Price","reverse","currentSort","updateProductSearch","get","then","data","listData","Object","keys","List","forEach","item","push","Total","filterFromJson","addProductToList","isProductOnList","ids","Id","indexOf","loadMoreProducts","setFilter","key","value","isFilterActive","setSort","isSortActive","setSortReverse","component","template","bindings","search","directive","restrict","$element","console","log","responseType","defer","response","reason","reject","promise","currentId","pop","json","appellation","vineyard"],"mappings":"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","file":"main.min.js","sourcesContent":["/// <reference path=\"../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nnamespace WineApp {\r\n    export function WineConfig($stateProvider, $urlRouterProvider, $locationProvider) {\r\n        $urlRouterProvider.otherwise(\"/\");\r\n\r\n        $locationProvider.html5Mode(true);\r\n\r\n        $stateProvider\r\n            .state('search', {\r\n                url: '/',\r\n                templateUrl: '/assets/ts/components/wine/view/search.html'\r\n            })\r\n            .state('list', {\r\n                url: '/list',\r\n                templateUrl: '/assets/ts/components/wine/view/list.html'\r\n            })\r\n            .state('detail', {\r\n                url: '/detail/:id',\r\n                templateUrl: '/assets/ts/components/wine/view/detail.html',\r\n                controller: 'DetailCtrl',\r\n                controllerAs: 'detail',\r\n                resolve: {\r\n                    details: function (service, $stateParams) {\r\n                        return service.getCurrentProduct($stateParams.id);\r\n                    }\r\n                }\r\n            })\r\n            .state('edit', {\r\n                url: '/detail/:id/edit',\r\n                templateUrl: '/assets/ts/components/wine/view/edit.html'\r\n            });\r\n    }\r\n}","/// <reference path=\"../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nnamespace WineApp {\r\n    angular.module('app', [\r\n        \"ui.router\",\r\n        \"wine\"\r\n    ])        \r\n   .config(WineApp.WineConfig)\r\n}","angular.module(\"wine\", []);","/// <reference path=\"../../../../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nangular.module(\"wine\")\r\n    .controller(\"DetailCtrl\", function (details) {\r\n        this.product = details;\r\n    }); ","/// <reference path=\"../../../../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nangular.module(\"wine\")\r\n    .controller(\"ListCtrl\", function (service) {\r\n        this.list = service.list;\r\n    });","/// <reference path=\"../../../../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nangular.module(\"wine\")\r\n    .controller(\"SearchCtrl\", function (service, $q, $http) {\r\n        this.searchQuery = null;\r\n        this.apiKey = \"9abd6256d560e9392d129425afe7eee9\";\r\n        this.service = \"http://services.wine.com/api/beta2/service.svc/json/catalog\";\r\n        this.products;\r\n        this.list = service.list;\r\n        this.total;\r\n        this.filter;\r\n        this.showSearchResult = false;\r\n        this.offset = 10;\r\n\r\n        this.filterOptions = {\r\n            Appellation: {\r\n                Name: \"\"\r\n            },\r\n            Vineyard: {\r\n                Name: \"\"\r\n            }\r\n        }\r\n\r\n        this.sortOptions = {\r\n            options: {\r\n                Name: \"Name\",\r\n                Vineyard: \"Vineyard.Name\",\r\n                Appellation: \"Appellation.Name\",\r\n                Price: \"PriceRetail\"\r\n            },\r\n            reverse: false,\r\n            currentSort: \"Name\"\r\n        }\r\n\r\n        this.updateProductSearch = () => {\r\n            service.get(this.service + \"?search=\" + this.searchQuery + \"&apikey=\" + this.apiKey, $http, $q, 'json')\r\n                .then((data) => {\r\n                    this.products = [];\r\n                    var listData = data[Object.keys(data)[1]].List;\r\n                    listData.forEach((item) => {\r\n                        this.products.push(item);\r\n                    });\r\n                        \r\n                    this.total = data[Object.keys(data)[1]].Total;\r\n                    this.filter = service.filterFromJson(this.products);\r\n                    this.showSearchResult = true;\r\n                });\r\n        }\r\n\r\n        this.addProductToList = (product) => {\r\n            service.addProductToList(product);\r\n        }\r\n\r\n        this.isProductOnList = (product) => {\r\n            var ids = [];\r\n            this.list.forEach((item) => {\r\n                ids.push(item.Id);\r\n            });\r\n\r\n            return ids.indexOf(product.Id) !== -1;\r\n        }\r\n\r\n        this.loadMoreProducts = () => {\r\n            service.get(this.service + \"?search=\" + this.searchQuery + \"&offset=\" + this.offset + \"&apikey=\" + this.apiKey, $http, $q, 'json')\r\n                .then((data) => {\r\n                    var listData = data[Object.keys(data)[1]].List;\r\n                    listData.forEach((item) => {\r\n                        this.products.push(item);\r\n                    });\r\n                    this.filter = service.filterFromJson(this.products);\r\n                    this.offset += 10;\r\n                });\r\n        }\r\n\r\n        this.setFilter = (key, value) => {\r\n            if (this.filterOptions[key].Name == value) {\r\n                this.filterOptions[key].Name = '';\r\n            }\r\n            else {\r\n                this.filterOptions[key].Name = value;\r\n            }\r\n        }\r\n\r\n        this.isFilterActive = (key, value) => {\r\n            return this.filterOptions[key].Name == value;\r\n        }\r\n\r\n        this.setSort = (value) => {\r\n            this.sortOptions.currentSort = value;\r\n        }\r\n\r\n        this.isSortActive = (value) => {\r\n            return this.sortOptions.currentSort == value;\r\n        }\r\n\r\n        this.setSortReverse = (value) => {\r\n            this.sortOptions.reverse = value;\r\n        }\r\n    });","angular.module(\"wine\").component(\"product\", {\r\n    controller: function () {\r\n        \r\n    },\r\n    template: `<div class=\"search__product\" ng-class=\"{'active': $ctrl.search.isProductOnList($ctrl.product)}\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-2 col-sm-2 col-xs-2 search__product_img\">\r\n                            <img src=\"{{$ctrl.product.Vineyard.ImageUrl}}\" class=\"img-responsive\" />\r\n                        </div>\r\n\r\n                        <div class=\"col-md-6 col-sm-6 col-xs-6 search__product_details\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-6 col-sm-6 col-xs-6\">\r\n                                    <b>Product Name:</b>\r\n                                </div>\r\n\r\n                                <div class=\"col-md-6 col-sm-6 col-xs-6 text-right\">\r\n                                    {{$ctrl.product.Name}}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-6 col-sm-6 col-xs-6\">\r\n                                    <b>Vineyard:</b>\r\n                                </div>\r\n\r\n                                <div class=\"col-md-6 col-sm-6 col-xs-6 text-right\">\r\n                                    {{$ctrl.product.Vineyard.Name}}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"row\">\r\n                                <div class=\"col-md-6 col-sm-6 col-xs-6\">\r\n                                    <b>Appellation:</b>\r\n                                </div>\r\n\r\n                                <div class=\"col-md-6 col-sm-6 col-xs-6 text-right\">\r\n                                    {{$ctrl.product.Appellation.Name}}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-3 col-sm-3 col-xs-3 search__product_price text-right\">\r\n                            <b>{{$ctrl.product.PriceRetail}}$</b>\r\n                        </div>\r\n\r\n                        <div class=\"col-md-1 col-sm-1 col-xs-1 search__product_addtolist\" ng-click=\"$ctrl.search.addProductToList($ctrl.product)\">\r\n                        </div>\r\n                    </div>\r\n                </div>`,\r\n    bindings: { product: '=', search: '=' }\r\n});\r\n\r\nangular.module(\"wine\").directive(\"hest\", function () {\r\n    return {\r\n        restrict: 'A',\r\n        controller: function ($element) {\r\n            console.log($element);\r\n        }\r\n    };\r\n});","/// <reference path=\"../../../../../scripts/typings/bootstrap/bootstrap.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angular-ui-router/angular-ui-router.d.ts\" />\r\n/// <reference path=\"../../../../../scripts/typings/angularjs/angular.d.ts\" />\r\n\r\nangular.module(\"wine\").service(\"service\", function () {\r\n    this.list = [];\r\n\r\n    this.get = (url: string, $http: ng.IHttpService, $q, responseType?: string): ng.IPromise<any> => {\r\n        var defer = $q.defer();\r\n\r\n        $http.get(url, { responseType: responseType ? responseType : 'json' })\r\n            .then(function successCallback(response) {\r\n                defer.resolve(response.data);\r\n            }, function errorCallback(reason) {\r\n                defer.reject(reason);\r\n            });\r\n        return defer.promise;\r\n    }\r\n\r\n    this.addProductToList = (product: Object) => {\r\n        this.list.push(product);\r\n    }\r\n\r\n    this.getCurrentProduct = (currentId) => {\r\n        var product = this.list.filter((item) => {\r\n            return item.Id == currentId;\r\n        });\r\n\r\n        return product.pop();\r\n    }\r\n\r\n    this.filterFromJson = (json) => {\r\n        var filter = {};\r\n        var appellation = [];\r\n        var vineyard = [];\r\n\r\n        json.forEach((item) => {\r\n            if (appellation.indexOf(item.Appellation.Name) < 0) {\r\n                appellation.push(item.Appellation.Name); \r\n            }\r\n\r\n            if (vineyard.indexOf(item.Vineyard.Name) < 0) {\r\n                vineyard.push(item.Vineyard.Name);\r\n            }\r\n        });\r\n\r\n        filter[\"Appellation\"] = appellation;\r\n        filter[\"Vineyard\"] = vineyard;\r\n\r\n        return filter;\r\n    }\r\n});"],"sourceRoot":"/source/"}